# RAGfish / Noesis Noema â€“ Context Index

This document defines the authoritative design entry points and the formal Question model.
All implementation must comply with these definitions.

---

# 1. Product Constitution
- docs/constitution/
- ADR-0000 (Human Sovereignty Principle)

---

# 2. Question Schema (Formal Definition)

A Question is not a raw string.
It is a structured object governed by human sovereignty.

## 2.1 Logical Model

A Question MUST contain:

- id (UUID)
- timestamp (ISO 8601)
- origin ("human" only)
- intent (short semantic label)
- content (primary user text)
- privacy_level ("local" | "cloud" | "auto")
- constraints (optional structured hints)

## 2.2 JSON Schema (Normative)

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "NoemaQuestion",
  "type": "object",
  "required": [
    "id",
    "timestamp",
    "origin",
    "intent",
    "content",
    "privacy_level"
  ],
  "properties": {
    "id": {
      "type": "string",
      "format": "uuid"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "origin": {
      "type": "string",
      "enum": ["human"]
    },
    "intent": {
      "type": "string",
      "minLength": 1
    },
    "content": {
      "type": "string",
      "minLength": 1
    },
    "privacy_level": {
      "type": "string",
      "enum": ["local", "cloud", "auto"]
    },
    "constraints": {
      "type": "object",
      "additionalProperties": true
    }
  },
  "additionalProperties": false
}
```

## 2.3 Enforcement Rules

- Router decisions MUST operate on this structured object.
- Raw string prompts are forbidden at invocation boundary.
- origin MUST never be mutated by AI.
- privacy_level MUST be respected by routing layer.

---

# 3. AI Agent Instruction

Before implementing any feature:

1. Read this file.
2. Validate compliance with Question Schema.
3. Do not introduce raw string prompt execution.
4. Do not bypass privacy_level routing.

Violation requires ADR update.
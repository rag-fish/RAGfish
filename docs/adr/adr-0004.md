# ADR-0004: Architecture Constitution Introduction

## Status
Accepted

## Context

As the RAGfish ecosystem expanded across multiple repositories (client application, execution agent, knowledge packs), the original architecture documentation gradually drifted toward a mix of implementation details, feature descriptions, and aspirational ideas.

This created several risks:
- Blurred responsibility boundaries between humans and AI systems
- Over-interpretation of AI capabilities as decision-making entities
- Accidental coupling between execution logic and knowledge representation
- Design decisions being driven by tooling trends rather than system intent

At the same time, rapid iteration practices (often labeled "vibe coding") proved effective for exploration but insufficient for maintaining long-term structural integrity.

A reset was required.

## Decision

We introduce an explicit **Architecture Constitution** as the governing document of the RAGfish ecosystem.

The Architecture Constitution:
- Defines non-negotiable system principles
- Establishes clear boundaries between Client, Execution, and Knowledge layers
- Explicitly rejects AI autonomy and responsibility transfer
- Prioritizes human accountability over model capability

The Constitution replaces the previous role of ARCHITECTURE.md as an implementation guide and elevates it to a normative, constraint-setting document.

Exploratory coding is permitted, but no exploratory artifact may override or implicitly redefine the Constitution.

## Consequences

### Positive
- Long-term architectural coherence across repositories
- Reduced risk of agent overreach and hidden behavior encoding
- Clear evaluation criteria for future design and pull requests
- Improved portability across models, runtimes, and deployment targets

### Trade-offs
- Slower early-stage experimentation due to explicit constraints
- Additional documentation overhead for architectural changes

These trade-offs are accepted as necessary for sustainability, auditability, and trustworthiness.

## Notes

This decision intentionally prioritizes system integrity over development velocity.

All future ADRs must be compatible with the Architecture Constitution. Any proposal that violates it must be rejected or revised.
